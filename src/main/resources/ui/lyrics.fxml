<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<VBox xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.luciferc137.cmp.ui.LyricsController"
      spacing="10" prefWidth="600" prefHeight="700">
    <padding>
        <Insets top="20" right="20" bottom="20" left="20" />
    </padding>

    <!-- Header: Current track info -->
    <HBox alignment="CENTER_LEFT" spacing="15" styleClass="lyrics-header">
        <padding>
            <Insets bottom="15" />
        </padding>

        <!-- Cover art -->
        <ImageView fx:id="coverArtView" fitWidth="80" fitHeight="80" preserveRatio="true" smooth="true"/>

        <!-- Track info -->
        <VBox alignment="CENTER_LEFT" spacing="3" HBox.hgrow="ALWAYS">
            <Label fx:id="titleLabel" styleClass="lyrics-title" text="No track playing" />
            <Label fx:id="artistLabel" styleClass="lyrics-artist" text="" />
            <Label fx:id="albumLabel" styleClass="lyrics-album" text="" />
        </VBox>

        <!-- Fetch lyrics button -->
        <Button fx:id="fetchButton" onAction="#onFetchLyrics" styleClass="fetch-button"
                prefWidth="34" prefHeight="34">
            <graphic>
                <ImageView fitWidth="20" fitHeight="20" preserveRatio="true">
                    <image>
                        <Image url="@/icons/fetch.png"/>
                    </image>
                </ImageView>
            </graphic>
            <tooltip>
                <Tooltip text="Fetch lyrics from internet" />
            </tooltip>
        </Button>

        <!-- Edit button -->
        <Button fx:id="editButton" text="âœ Edit" onAction="#onEditMetadata" styleClass="edit-button" />
    </HBox>

    <!-- Separator -->
    <Separator />

    <!-- Loading indicator -->
    <HBox fx:id="loadingBox" alignment="CENTER" spacing="10" visible="false" managed="false">
        <ProgressIndicator prefWidth="20" prefHeight="20" />
        <Label fx:id="loadingLabel" text="Fetching lyrics..." styleClass="loading-text" />
    </HBox>

    <!-- Lyrics content in a ScrollPane -->
    <ScrollPane fx:id="lyricsScrollPane" fitToWidth="true" VBox.vgrow="ALWAYS"
                styleClass="lyrics-scroll-pane" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
        <VBox alignment="TOP_CENTER" spacing="10">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30" />
            </padding>
            <Label fx:id="lyricsLabel" styleClass="lyrics-content" wrapText="true"
                   text="No lyrics available" alignment="TOP_CENTER"/>
        </VBox>
    </ScrollPane>

    <!-- Footer with status -->
    <HBox alignment="CENTER" spacing="10">
        <padding>
            <Insets top="10" />
        </padding>
        <Label fx:id="statusLabel" styleClass="lyrics-status" text="" />
    </HBox>
</VBox>

